{
  "version": 3,
  "sources": ["../../../../../tinacms/dist/edit-state.mjs"],
  "sourcesContent": ["import { useEditState as useEditState$1, EditProvider, TinaDataContext } from \"@tinacms/sharedctx\";\nimport { isEditing, setEditing } from \"@tinacms/sharedctx\";\nimport React, { useState, useEffect } from \"react\";\nconst useEditState = useEditState$1;\nconst TinaEditProvider = ({\n  showEditButton,\n  ...props\n}) => {\n  return /* @__PURE__ */ React.createElement(EditProvider, null, showEditButton && /* @__PURE__ */ React.createElement(ToggleButton, null), /* @__PURE__ */ React.createElement(TinaEditProviderInner, { ...props }));\n};\nfunction useTina({\n  query,\n  variables,\n  data\n}) {\n  React.useEffect(() => {\n    console.warn(`\n  \"useTina\" from 'tinacms/dist/edit-state' is now deprecated\n  * Use \"import { useTina } from 'tinacms/dist/react\" instead.\n  * See https://tina.io/blog/upgrading-to-iframe/ for full migration details\n  `);\n  }, []);\n  const {\n    setRequest,\n    state,\n    isDummyContainer,\n    isLoading: contextLoading\n  } = React.useContext(TinaDataContext);\n  const [waitForContextRerender, setWaitForContextRerender] = useState(\n    !isDummyContainer\n  );\n  const isLoading = contextLoading || waitForContextRerender;\n  React.useEffect(() => {\n    setRequest({ query, variables });\n  }, [JSON.stringify(variables), query]);\n  useEffect(() => {\n    if (!isDummyContainer) {\n      setTimeout(() => setWaitForContextRerender(false), 0);\n    }\n    return () => {\n      setRequest(void 0);\n    };\n  }, [isDummyContainer]);\n  return {\n    data: isDummyContainer || isLoading ? data : state.payload,\n    isLoading\n  };\n}\nconst ToggleButton = () => {\n  const { edit } = useEditState();\n  const [isOnAdmin, setIsOnAdmin] = React.useState(false);\n  React.useEffect(() => {\n    var _a;\n    if (window) {\n      if ((_a = window.location) == null ? void 0 : _a.pathname.startsWith(\"/admin\")) {\n        setIsOnAdmin(true);\n      }\n    }\n  }, [setIsOnAdmin]);\n  return edit || isOnAdmin ? null : /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      style: { position: \"fixed\", bottom: \"56px\", left: \"0px\", zIndex: 200 }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"a\",\n      {\n        href: \"/admin\",\n        style: {\n          borderRadius: \"0 50px 50px 0\",\n          fontSize: \"16px\",\n          fontFamily: \"Inter, 'Helvetica Neue', 'Arial Nova', Helvetica, Arial, sans-serif\",\n          fontWeight: \"bold\",\n          textDecoration: \"none\",\n          background: \"rgb(34, 150, 254)\",\n          boxShadow: \"0px 1px 3px rgb(0 0 0 / 10%), 0px 2px 6px rgb(0 0 0 / 20%)\",\n          color: \"white\",\n          padding: \"14px 20px\",\n          border: \"none\"\n        }\n      },\n      \"Edit with Tina\"\n    )\n  );\n};\nconst TinaEditProviderInner = ({ children, editMode }) => {\n  const { edit } = useEditState();\n  const [isBrowser, setIsBrowser] = React.useState(false);\n  React.useEffect(() => {\n    setIsBrowser(true);\n  }, []);\n  if (edit && isBrowser) {\n    return editMode;\n  }\n  return children;\n};\nexport {\n  TinaEditProvider,\n  isEditing,\n  setEditing,\n  useEditState,\n  useTina\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;AAEA,mBAA2C;AAC3C,IAAMA,gBAAe;AACrB,IAAM,mBAAmB,CAAC;AAAA,EACxB;AAAA,EACA,GAAG;AACL,MAAM;AACJ,SAAuB,aAAAC,QAAM,cAAc,cAAc,MAAM,kBAAkC,aAAAA,QAAM,cAAc,cAAc,IAAI,GAAmB,aAAAA,QAAM,cAAc,uBAAuB,EAAE,GAAG,MAAM,CAAC,CAAC;AACpN;AACA,SAAS,QAAQ;AAAA,EACf;AAAA,EACA;AAAA,EACA;AACF,GAAG;AACD,eAAAA,QAAM,UAAU,MAAM;AACpB,YAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,GAId;AAAA,EACD,GAAG,CAAC,CAAC;AACL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW;AAAA,EACb,IAAI,aAAAA,QAAM,WAAW,eAAe;AACpC,QAAM,CAAC,wBAAwB,yBAAyB,QAAI;AAAA,IAC1D,CAAC;AAAA,EACH;AACA,QAAM,YAAY,kBAAkB;AACpC,eAAAA,QAAM,UAAU,MAAM;AACpB,eAAW,EAAE,OAAO,UAAU,CAAC;AAAA,EACjC,GAAG,CAAC,KAAK,UAAU,SAAS,GAAG,KAAK,CAAC;AACrC,8BAAU,MAAM;AACd,QAAI,CAAC,kBAAkB;AACrB,iBAAW,MAAM,0BAA0B,KAAK,GAAG,CAAC;AAAA,IACtD;AACA,WAAO,MAAM;AACX,iBAAW,MAAM;AAAA,IACnB;AAAA,EACF,GAAG,CAAC,gBAAgB,CAAC;AACrB,SAAO;AAAA,IACL,MAAM,oBAAoB,YAAY,OAAO,MAAM;AAAA,IACnD;AAAA,EACF;AACF;AACA,IAAM,eAAe,MAAM;AACzB,QAAM,EAAE,KAAK,IAAID,cAAa;AAC9B,QAAM,CAAC,WAAW,YAAY,IAAI,aAAAC,QAAM,SAAS,KAAK;AACtD,eAAAA,QAAM,UAAU,MAAM;AACpB,QAAI;AACJ,QAAI,QAAQ;AACV,WAAK,KAAK,OAAO,aAAa,OAAO,SAAS,GAAG,SAAS,WAAW,QAAQ,GAAG;AAC9E,qBAAa,IAAI;AAAA,MACnB;AAAA,IACF;AAAA,EACF,GAAG,CAAC,YAAY,CAAC;AACjB,SAAO,QAAQ,YAAY,OAAuB,aAAAA,QAAM;AAAA,IACtD;AAAA,IACA;AAAA,MACE,OAAO,EAAE,UAAU,SAAS,QAAQ,QAAQ,MAAM,OAAO,QAAQ,IAAI;AAAA,IACvE;AAAA,IACgB,aAAAA,QAAM;AAAA,MACpB;AAAA,MACA;AAAA,QACE,MAAM;AAAA,QACN,OAAO;AAAA,UACL,cAAc;AAAA,UACd,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,YAAY;AAAA,UACZ,gBAAgB;AAAA,UAChB,YAAY;AAAA,UACZ,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAM,wBAAwB,CAAC,EAAE,UAAU,SAAS,MAAM;AACxD,QAAM,EAAE,KAAK,IAAID,cAAa;AAC9B,QAAM,CAAC,WAAW,YAAY,IAAI,aAAAC,QAAM,SAAS,KAAK;AACtD,eAAAA,QAAM,UAAU,MAAM;AACpB,iBAAa,IAAI;AAAA,EACnB,GAAG,CAAC,CAAC;AACL,MAAI,QAAQ,WAAW;AACrB,WAAO;AAAA,EACT;AACA,SAAO;AACT;",
  "names": ["useEditState", "React"]
}
